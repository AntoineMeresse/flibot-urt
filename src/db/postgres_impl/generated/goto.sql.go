// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: goto.sql

package postgres_genererated

import (
	"context"
)

const deleteGoto = `-- name: DeleteGoto :execrows
DELETE FROM goto WHERE mapname = $1 AND jumpname = $2
`

type DeleteGotoParams struct {
	Mapname  string
	Jumpname string
}

func (q *Queries) DeleteGoto(ctx context.Context, arg DeleteGotoParams) (int64, error) {
	result, err := q.db.Exec(ctx, deleteGoto, arg.Mapname, arg.Jumpname)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const getGotoByMapAndJump = `-- name: GetGotoByMapAndJump :one
SELECT pos_x, pos_y, pos_z, angle_v, angle_h
FROM goto
WHERE mapname = $1 AND jumpname = $2
`

type GetGotoByMapAndJumpParams struct {
	Mapname  string
	Jumpname string
}

type GetGotoByMapAndJumpRow struct {
	PosX   float64
	PosY   float64
	PosZ   float64
	AngleV float64
	AngleH float64
}

func (q *Queries) GetGotoByMapAndJump(ctx context.Context, arg GetGotoByMapAndJumpParams) (GetGotoByMapAndJumpRow, error) {
	row := q.db.QueryRow(ctx, getGotoByMapAndJump, arg.Mapname, arg.Jumpname)
	var i GetGotoByMapAndJumpRow
	err := row.Scan(
		&i.PosX,
		&i.PosY,
		&i.PosZ,
		&i.AngleV,
		&i.AngleH,
	)
	return i, err
}

const getGotoNamesByMap = `-- name: GetGotoNamesByMap :many
SELECT jumpname FROM goto WHERE mapname = $1 ORDER BY jumpname
`

func (q *Queries) GetGotoNamesByMap(ctx context.Context, mapname string) ([]string, error) {
	rows, err := q.db.Query(ctx, getGotoNamesByMap, mapname)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []string
	for rows.Next() {
		var jumpname string
		if err := rows.Scan(&jumpname); err != nil {
			return nil, err
		}
		items = append(items, jumpname)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const upsertGoto = `-- name: UpsertGoto :exec
INSERT INTO goto (mapname, jumpname, pos_x, pos_y, pos_z, angle_v, angle_h)
VALUES ($1, $2, $3, $4, $5, $6, $7)
ON CONFLICT (mapname, jumpname) DO UPDATE SET
    pos_x = EXCLUDED.pos_x,
    pos_y = EXCLUDED.pos_y,
    pos_z = EXCLUDED.pos_z,
    angle_v = EXCLUDED.angle_v,
    angle_h = EXCLUDED.angle_h
`

type UpsertGotoParams struct {
	Mapname  string
	Jumpname string
	PosX     float64
	PosY     float64
	PosZ     float64
	AngleV   float64
	AngleH   float64
}

func (q *Queries) UpsertGoto(ctx context.Context, arg UpsertGotoParams) error {
	_, err := q.db.Exec(ctx, upsertGoto,
		arg.Mapname,
		arg.Jumpname,
		arg.PosX,
		arg.PosY,
		arg.PosZ,
		arg.AngleV,
		arg.AngleH,
	)
	return err
}
